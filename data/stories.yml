version: "3.1"

stories:
- story: happy path
  steps:
  - intent: greet
  - action: utter_greet
  - intent: mood_great
  - action: utter_happy

- story: sad path 1
  steps:
  - intent: greet
  - action: utter_greet
  - intent: mood_unhappy
  - action: utter_cheer_up
  - action: utter_did_that_help
  - intent: affirm
  - action: utter_happy

- story: sad path 2
  steps:
  - intent: greet
  - action: utter_greet
  - intent: mood_unhappy
  - action: utter_cheer_up
  - action: utter_did_that_help
  - intent: deny
  - action: utter_goodbye

# Simplified add contact flow
- story: add contact happy path
  steps:
  - intent: add_contact
  - action: utter_add_contact_ask_name
  - intent: inform
    entities:
    - contact_name
  - slot_was_set:
    - contact_name: John
  - action: utter_add_contact_ask_address
  - intent: inform
    entities:
    - wallet_address
  - slot_was_set:
    - wallet_address: "0x123456789abcdef123456789abcdef123456789a"
  - action: action_validate_wallet_address
  - slot_was_set:
    - address_valid: true
  - action: action_reset_contact_slots

- story: add contact with invalid address
  steps:
  - intent: add_contact
  - action: utter_add_contact_ask_name
  - intent: inform
    entities:
    - contact_name
  - slot_was_set:
    - contact_name: Alice
  - action: utter_add_contact_ask_address
  - intent: inform
    entities:
    - wallet_address
  - slot_was_set:
    - wallet_address: "not-a-valid-address"
  - action: action_validate_wallet_address
  - slot_was_set:
    - address_valid: false
  - action: utter_add_contact_ask_address
  - intent: inform
    entities:
    - wallet_address
  - slot_was_set:
    - wallet_address: "0x123456789abcdef123456789abcdef123456789a"
  - action: action_validate_wallet_address
  - slot_was_set:
    - address_valid: true
  - action: action_reset_contact_slots

# Interrupt handling stories
- story: interrupt with ask_sentiment during contact flow
  steps:
  - intent: add_contact
  - action: utter_add_contact_ask_name
  - intent: ask_sentiment
  - action: action_analyze_sentiment
  - action: utter_add_contact_ask_name

- story: interrupt with check_scam during contact flow
  steps:
  - intent: add_contact
  - action: utter_add_contact_ask_name
  - intent: check_scam
  - action: utter_ask_crypto_description
  - intent: inform
  - action: action_detect_scam
  - action: utter_add_contact_ask_name
  
- story: interrupt with share_expertise during contact flow
  steps:
  - intent: add_contact
  - action: utter_add_contact_ask_name
  - intent: share_expertise
  - action: action_update_user_expertise
  - action: utter_add_contact_ask_name